name: Slack Notifier

on:
  issues:
    types: [opened, closed]
  issue_comment:
    types: [created]
  pull_request:
    types: [opened, closed]
  pull_request_review:
    types: [submitted]
  pull_request_review_comment:
    types: [created]
  push:
  create:
    branches:
  delete:
    branches:

jobs:
  # âœ… ì´ìŠˆ ìƒì„± ì•Œë¦¼
  notify-issue-opened:
    if: github.event_name == 'issues' && github.event.action == 'opened'
    uses: whatever-x/mobile/.github/workflows/issue-opened.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… ì´ìŠˆ ì¢…ë£Œ ì•Œë¦¼
  notify-issue-closed:
    if: github.event_name == 'issues' && github.event.action == 'closed'
    uses: whatever-x/mobile/.github/workflows/issue-closed.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      REPOSITORY_TOKEN: ${{ secrets.REPOSITORY_TOKEN }}

  # âœ… ì´ìŠˆ ì½”ë©˜íŠ¸
  notify-issue-commented:
    if: github.event_name == 'issue_comment' && github.event.action == 'created' && github.event.issue.pull_request == null
    uses: whatever-x/mobile/.github/workflows/issue-commented.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… PR ìƒì„± ì•Œë¦¼
  notify-pr-opened:
    if: github.event_name == 'pull_request' && github.event.action == 'opened'
    uses: whatever-x/mobile/.github/workflows/pr-opened.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… PR ë³‘í•© ì•Œë¦¼
  notify-pr-merged:
    if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true
    uses: whatever-x/mobile/.github/workflows/pr-merged.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… PR ê°•ì œ ì¢…ë£Œ ì•Œë¦¼
  notify-pr-force-closed:
    if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == false
    uses: whatever-x/mobile/.github/workflows/pr-force-closed.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… PR ë¦¬ë·° ìŠ¹ì¸
  notify-pr-review-approved:
    if: github.event_name == 'pull_request_review' && github.event.action == 'submitted' && github.event.review.state == 'approved'
    uses: whatever-x/mobile/.github/workflows/pr-review-submitted.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
    with:
      review_header: "âœ… PR ë¦¬ë·° ìŠ¹ì¸"

  # âœ… PR ë¦¬ë·° ë³€ê²½ ìš”ì²­
  notify-pr-review-changes:
    if: github.event_name == 'pull_request_review' && github.event.action == 'submitted' && github.event.review.state == 'changes_requested'
    uses: whatever-x/mobile/.github/workflows/pr-review-submitted.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
    with:
      review_header: "â— PR ë¦¬ë·° ë³€ê²½ ìš”ì²­"

  # âœ… PR ë¦¬ë·° ì½”ë©˜íŠ¸
  notify-pr-review-commented:
    if: github.event_name == 'pull_request_review' && github.event.action == 'submitted' && github.event.review.state == 'commented'
    uses: whatever-x/mobile/.github/workflows/pr-review-submitted.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
    with:
      review_header: "ğŸ’¬ PR ë¦¬ë·° ì½”ë©˜íŠ¸"

  # âœ… PR ë¼ì¸ ì½”ë©˜íŠ¸
  notify-pr-line-commented:
    if: github.event_name == 'pull_request_review_comment' && github.event.action == 'created'
    uses: whatever-x/mobile/.github/workflows/pr-line-commented.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… PR ì¼ë°˜ ì½”ë©˜íŠ¸
  notify-pr-general-commented:
    if: github.event_name == 'issue_comment' && github.event.action == 'created' && github.event.issue.pull_request != null
    uses: whatever-x/mobile/.github/workflows/pr-commented.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… ë¸Œëœì¹˜ ìƒì„±
  notify-branch-created:
    if: github.event.ref_type == 'branch' && github.event_name == 'create'
    uses: whatever-x/mobile/.github/workflows/branch-created.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… ë¸Œëœì¹˜ ì‚­ì œ
  notify-branch-deleted:
    if: github.event.ref_type == 'branch' && github.event_name == 'delete'
    uses: whatever-x/mobile/.github/workflows/branch-deleted.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # âœ… ì»¤ë°‹ í‘¸ì‹œ
  notify-push:
    if: github.event_name == 'push' && startsWith(github.ref, 'refs/heads/')
    uses: whatever-x/mobile/.github/workflows/push-committed.yml@refactor/slack-notifier-workflow
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
